{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/background.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","showNoNgPopup","tabId","undefined","chrome","pageAction","setIcon","path","16","32","48","128","setPopup","popup","show","runtime","onInstalled","addListener","storage","sync","clear","contextMenus","create","id","title","contexts","declarativeContent","onPageChanged","removeRules","addRules","conditions","PageStateMatcher","pageUrl","hostPrefix","actions","ShowPageAction","onClicked","info","menuItemId","tabs","query","active","currentWindow","sendMessage","command","lastError","onMessage","request","sender","_a","tab"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,gBCuCA,SAASK,EAAcC,QACPC,IAAVD,GACFE,OAAOC,WAAWC,QAChB,CACEC,KAAM,CACJC,GAAM,iCACNC,GAAM,iCACNC,GAAM,iCACNC,IAAO,mCAETT,MAAKA,GAEP,WACEE,OAAOC,WAAWO,SAChB,CACEC,MAAO,oBACPX,MAAKA,GAEP,WACEE,OAAOC,WAAWS,KAAKZ,OA1DnCE,OAAOW,QAAQC,YAAYC,YAAY,WACrCb,OAAOc,QAAQC,KAAKC,QACpBhB,OAAOiB,aAAaC,OAAO,CACzBC,GAAI,iBACJC,MAAO,gCACPC,SAAU,CAAC,SAEbrB,OAAOsB,mBAAmBC,cAAcC,iBAAYzB,EAAW,WAC7DC,OAAOsB,mBAAmBC,cAAcE,SAAS,CAC/C,CACEC,WAAY,CACV,IAAI1B,OAAOsB,mBAAmBK,iBAAiB,CAC7CC,QAAS,CAAEC,WAAY,gBAG3BC,QAAS,CAAC,IAAI9B,OAAOsB,mBAAmBS,uBAKhD/B,OAAOiB,aAAae,UAAUnB,YAAY,SAACoB,GACjB,mBAApBA,EAAKC,YACPlC,OAAOmC,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,GAAQ,SAACH,GACpDA,EAAK,IAAMA,EAAK,GAAGhB,IACrBnB,OAAOmC,KAAKI,YAAYJ,EAAK,GAAGhB,GAAI,CAAEqB,QAAS,QAAU,WACnDxC,OAAOW,QAAQ8B,WAEjB5C,EAAcsC,EAAK,GAAGhB,UAOlCnB,OAAOW,QAAQ+B,UAAU7B,YAAY,SAAC8B,EAASC,G,MACrB,qBAApBD,EAAQH,SACV3C,EAAwB,QAAXgD,EAACD,EAAOE,WAAG,IAAAD,OAAA,EAAAA,EAAE1B","file":"background.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","chrome.runtime.onInstalled.addListener(() => {\n  chrome.storage.sync.clear();\n  chrome.contextMenus.create({\n    id: \"ngneat-inspect\",\n    title: \"Inspect with ngneat inspector\",\n    contexts: [\"all\"],\n  });\n  chrome.declarativeContent.onPageChanged.removeRules(undefined, () => {\n    chrome.declarativeContent.onPageChanged.addRules([\n      {\n        conditions: [\n          new chrome.declarativeContent.PageStateMatcher({\n            pageUrl: { hostPrefix: \"localhost\" },\n          }),\n        ],\n        actions: [new chrome.declarativeContent.ShowPageAction()],\n      },\n    ]);\n  });\n});\nchrome.contextMenus.onClicked.addListener((info) => {\n  if (info.menuItemId === \"ngneat-inspect\") {\n    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n      if (tabs[0] && tabs[0].id) {\n        chrome.tabs.sendMessage(tabs[0].id, { command: \"show\" }, () => {\n          if (chrome.runtime.lastError) {\n            // connection was not established, that means it is not an Angular 9+ application\n            showNoNgPopup(tabs[0].id);\n          }\n        });\n      }\n    });\n  }\n});\nchrome.runtime.onMessage.addListener((request, sender) => {\n  if (request.command === \"show-no-ng-popup\") {\n    showNoNgPopup(sender.tab?.id);\n  }\n});\nfunction showNoNgPopup(tabId: number | undefined) {\n  if (tabId !== undefined) {\n    chrome.pageAction.setIcon(\n      {\n        path: {\n          \"16\": \"assets/images/ngneat_bw_16.png\",\n          \"32\": \"assets/images/ngneat_bw_32.png\",\n          \"48\": \"assets/images/ngneat_bw_48.png\",\n          \"128\": \"assets/images/ngneat_bw_128.png\",\n        },\n        tabId,\n      },\n      () => {\n        chrome.pageAction.setPopup(\n          {\n            popup: \"./nong-popup.html\",\n            tabId,\n          },\n          () => {\n            chrome.pageAction.show(tabId);\n          }\n        );\n      }\n    );\n  }\n}\n"]}